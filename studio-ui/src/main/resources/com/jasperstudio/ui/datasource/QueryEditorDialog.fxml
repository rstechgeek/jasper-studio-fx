<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<BorderPane prefHeight="500.0" prefWidth="700.0" xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml" fx:controller="com.jasperstudio.ui.datasource.QueryEditorDialog">
    <top>
        <VBox style="-fx-background-color: #f4f4f4; -fx-padding: 10;">
             <Label text="Dataset and Query Dialog" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
             <Label fx:id="lblActiveAdapter" text="Active Adapter: None" style="-fx-text-fill: #666;"/>
        </VBox>
    </top>
    
    <center>
        <SplitPane dividerPositions="0.6" orientation="VERTICAL">
            <items>
                <!-- Top Half: Query Editor -->
                <BorderPane>
                    <center>
                         <TabPane tabClosingPolicy="UNAVAILABLE">
                             <Tab text="SQL / Query">
                                 <TextArea fx:id="txtQuery" promptText="SELECT * FROM table..." style="-fx-font-family: monospace;"/>
                             </Tab>
                         </TabPane>
                    </center>
                    <bottom>
                        <HBox spacing="10" alignment="CENTER_RIGHT" style="-fx-padding: 5;">
                            <Button text="Read Fields" onAction="#onReadFields"/>
                            <Button text="Data Preview" onAction="#onPreview"/>
                        </HBox>
                    </bottom>
                </BorderPane>
                
                <!-- Bottom Half: Field/Data Preview -->
                <TabPane tabClosingPolicy="UNAVAILABLE">
                    <Tab text="Fields">
                         <TableView fx:id="tblFields">
                             <!-- Columns added programmatically -->
                         </TableView>
                    </Tab>
                    <Tab text="Data Preview">
                         <TableView fx:id="tblPreview">
                             <!-- Columns and data added programmatically -->
                         </TableView>
                    </Tab>
                </TabPane>
            </items>
        </SplitPane>
    </center>
    
    <bottom>
        <HBox spacing="10" alignment="CENTER_RIGHT" style="-fx-padding: 10; -fx-border-color: #ddd; -fx-border-width: 1 0 0 0;">
            <Button text="Cancel" onAction="#onCancel"/>
            <Button text="OK" onAction="#onOk" defaultButton="true"/>
        </HBox>
    </bottom>
    
</BorderPane>
